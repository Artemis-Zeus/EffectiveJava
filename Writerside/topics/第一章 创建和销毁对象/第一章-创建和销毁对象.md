# 第一章-创建和销毁对象 {id="chapter1-creating-destroying-objects"}

创建和销毁对象是 Java 编程中最基础也是最重要的部分。本章将介绍如何正确地创建和销毁对象，以及在什么时候应该创建对象，什么时候应该避免创建对象。

## 本章要点

本章包含以下关键条目：

1. [考虑使用静态工厂方法代替构造器](使用静态工厂方法代替构造器.md)
2. [当构造器参数较多时考虑使用生成器](当构造器参数较多时考虑使用生成器.md)
3. [利用私有构造器或枚举类型强化Singleton属性](利用私有构造器或枚举类型强化Singleton属性.md)
4. [利用私有构造器防止类被实例化](利用私有构造器防止类被实例化.md)
5. [优先考虑通过依赖注入来连接资源](优先考虑通过依赖注入来连接资源.md)
6. [避免创建不必要的对象](避免创建不必要的对象.md)
7. [清除过期的对象引用](清除过期的对象引用.md)
8. [避免使用终结方法和清理方法](避免使用总结方法和清理方法.md)
9. [try-with-resources 优先于 try-finally](与try-finally相比，首选try-with-resources.md)

## 核心原则

在创建和销毁对象时，应遵循以下核心原则：

1. **可读性优先**：对象的创建方式应该清晰易懂，便于维护。
2. **资源管理**：正确管理对象生命周期，及时释放不需要的资源。
3. **性能优化**：避免创建不必要的对象，减少内存占用。
4. **安全性**：确保对象创建和销毁过程的安全性，防止内存泄漏。

## 最佳实践概览

### 1. 对象创建

- 使用静态工厂方法代替构造器，获得更好的灵活性和可读性
- 当参数过多时，使用 Builder 模式避免重叠构造器
- 使用依赖注入来管理资源依赖
- 优先使用连接池等对象池而非重复创建对象

### 2. 对象销毁

- 及时清除对象引用，防止内存泄漏
- 使用 try-with-resources 自动管理资源
- 避免使用终结方法（finalizer）和清理方法（cleaner）
- 显式关闭需要清理的资源

### 3. 注意事项

- 单例模式的实现要考虑线程安全
- 工具类应使用私有构造器防止实例化
- 注意避免创建重复的对象，特别是在循环中
- 使用对象池时要权衡利弊

## 常见问题

1. **内存泄漏**：
   - 缓存中的过期引用未清理
   - 监听器和回调未注销
   - 自定义类加载器导致的内存泄漏

2. **性能问题**：
   - 字符串拼接导致的频繁对象创建
   - 自动装箱导致的不必要对象创建
   - 重复创建昂贵的对象

## 练习题

1. 比较构造器和静态工厂方法的优劣势。
2. 实现一个线程安全的单例模式。
3. 设计一个使用 Builder 模式的类。
4. 编写一个正确管理资源的工具类。

## 小结

本章介绍的创建和销毁对象的最佳实践，是编写高质量 Java 代码的基础。正确地创建和管理对象可以提高代码的可维护性、性能和安全性。在实际编程中，应该根据具体场景选择合适的模式和方法。

---

接下来，让我们详细了解每个具体的条目。
